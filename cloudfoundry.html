<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Cloud Foundry启动营</title>
<style>
#page_content strong {font-size: 1.2em; font-weight: bold;}
</style>
</head>
<body>
<div id="page_content">
<span class="page_content2" style="margin-left:10px;">
      <div>
<h2 style="font-size:150%;">Cloud Foundry启动营</h2>

<p>  <img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/logo.jpeg" alt=""></p>

<h2>什么是Cloud Foundry</h2>

<p>Cloud Foundry 是一个开源的平台即服务产品，它提供给开发者自由度去选择云平台，开发框架和应用服务。Cloud Foundry最初由VMware 发起，得到了业界广泛的支持，它使得开发者能够更快更容易的开发，测试，部署和扩展应用。Cloud Foundry是一个开源项目，用户可以使用多种私有云发行版，也可以使用公共云服务，包括<a href="http://www.cloudfoundry.com">http://www.cloudfoundry.com。</a></p>

<h2>活动规则</h2>

<p>在<a href="http://www.cloudfoundry.com">www.cloudfoundry.com</a>注册账号并成功上传应用程序，即可凭账号ID和应用URL换取Cloud Foundry主题卫衣一件。具体的操作步骤和注意事项请阅读后续文档。</p>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/clothes.jpeg" alt="" width="600px"></p>

<p> </p>


<h2>四个步骤赢Cloud Foundry主题卫衣</h2>

<h3><strong>第一步：在<a href="http://www.cloudfoundry.com">http://www.cloudfoundry.com</a>注册开发者账号</strong></h3>

<p>访问网址 <a href="https://my.cloudfoundry.com/signup/cfcn">https://my.cloudfoundry.com/signup/cfcn</a> 注册Cloud Foundry PaaS平台账号。请确保在Promo Code框中输入推广码cfcn，以便快速获得账号。无推广码的情况下申请账号需要24-48小时的审核时间。</p>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/p1.png" width="600px" alt=""></p>

<p> <img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/p2.png" width="600px" alt=""></p>

<p>注册完成后的几分钟内，您将收到主题为“Welcome to Cloud Foundry - Your signup is approved!”，内有登陆Cloud Foundry平台的用户名和密码。</p>

<p> </p>

<h3><strong>第二步：安装vmc或Eclipse/STS插件</strong></h3>

<p>请根据Cloud Foundry开发者文档中的步骤，安装vmc工具或者Eclipse/STS插件。</p>

<p>安装vmv工具：<a href="http://docs.cloudfoundry.com/tools/vmc/vmc.html">http://docs.cloudfoundry.com/tools/vmc/vmc.html</a>
    <br/>
安装Eclipse/STS插件：<a href="http://docs.cloudfoundry.com/tools/STS/sts-eclipse.html">http://docs.cloudfoundry.com/tools/STS/sts-eclipse.html</a></p>

<p>vmc依赖Ruby运行环境，以下是Windows、Mac OS和Ubuntu下Ruby运行环境的安装方式，具体步骤，也可以参考上面的链接。</p>

<p><strong>Windows</strong></p>

<p>下载安装Windows下面的Ruby安装包（<a href="http://www.rubyinstaller.org">http://www.rubyinstaller.org</a>）。安装包已经包含了 RubyGems，确保可以在Windows下使用Ruby命令行工具，因为后面安装和使用VMC的时候会用到。你可以通过Windows开始菜单来访问命令行工具 (All Programs &gt; Ruby <version> &gt; Start Command Prompt with Ruby)。最后，通过下面Ruby命令行更新RubyGems:</version></p>

<blockquote><p>prompt&gt; gem update --system</p></blockquote>

<p><strong>Mac OS X</strong></p>

<p>OS X 10.5 或者更高版本的Mac OS X 已经安装了Ruby 和RubyGems。如果你使用老版本的OS X，可以通过以下链接下载最新Ruby和RubyGems
<br/>
Ruby：<a href="http://www.ruby-lang.org/en/downloads">http://www.ruby-lang.org/en/downloads</a>
<br/>
RubyGems：<a href="http://rubygems.org/pages/download">http://rubygems.org/pages/download</a></p>

<p><strong>Ubuntu</strong></p>

<p>在控制台下，通过apt-get 命令行工具来安装Ruby and RubyGems，如下所示。</p>

<ol>
<li>安装 Ruby包和RubyGems:</li>
<blockquote><p>prompt$ sudo apt-get install ruby-full rubygems</p></blockquote>

<li>测试一下gem 命令是否已经在path中:</li>
<blockquote><p>prompt$ which gem</p></blockquote>

<p>如果gem命令没有发现，更新一下你的PATH环境变量，比如，你可以通过下面命令更新你的.bashrc文件:</p>

<blockquote><p>export PATH=$PATH:/var/lib/gems/1.8/bin</p></blockquote>

<li>更新RubyGems:</li>
</ol>


<p>Ubuntu 10.04</p>

<blockquote><p>prompt$ sudo gem install rubygems-update
    <br/>
prompt$ sudo /var/lib/gems/1.8/bin/update_rubygems</p></blockquote>

<p>Ubuntu 11.10</p>

<blockquote><p>prompt$ sudo su -<br/>
prompt# export REALLY_GEM_UPDATE_SYSTEM=true<br/>
prompt# gem update --system<br/>
prompt# exit</p></blockquote>

<p>安装vmc</p>

<blockquote><p>prompt$ sudo gem install vmc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mac/Ubuntuo平台<br/>
prompt&gt; gem install vmc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Windows平台</p></blockquote>

<p>使用vmc命令</p>

<p>与Cloud Foundry建立连接</p>

<blockquote><p>prompt$ vmc target api.cloudfoundry.com</p></blockquote>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/2.png" width="600px" alt=""></p>

<p>获得平台的基本信息</p>

<blockquote><p>prompt$ vmc login<br/>
prompt$ vmc info<br/>
prompt$ vmc passwd</p></blockquote>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/3.png" width="600px" alt=""></p>

<p>如果以上命令都可以正常运行，表明您的vmc工具成功安装，您可以着手开发应用程序了！</p>

<p>有关vmc的更多使用细节，请参考Cloud Foundry中文培训课程，您可以<a href="http://cloudfoundry.csdn.net/download.html">http://cloudfoundry.csdn.net/download.html</a>下载课程的PPT和视频。</p>

<h3><strong>第三步 ：开发应用</strong></h3>

<p>Cloud Foundry支持Java、Ruby、Node.JS和Scale语言及配套框架，并提供MySQL、MongoDB、RabbitMQ、Redis、PostgreSQL等后端服务。您可以尝试上传自己开发的应用，也可以使用我们提供的演示代码。</p>

<p>如果需要参考开发者文档，请访问以下内容
语言和框架支持：<a href="http://docs.cloudfoundry.com/frameworks.html">http://docs.cloudfoundry.com/frameworks.html</a>
<br/>
后端服务的支持和绑定方法：<a href="http://docs.cloudfoundry.com/services.html">http://docs.cloudfoundry.com/services.html</a></p>

<p>部分Cloud Foundry演示代码位置</p>

<p><a href="https://github.com/SpringSource/cloudfoundry-samples">https://github.com/SpringSource/cloudfoundry-samples</a></p>

<p><a href="https://github.com/cloudfoundry-samples">https://github.com/cloudfoundry-samples</a></p>

<p>有关应用程序开发的更多细节，请参考Cloud Foundry中文培训课程，您可以在<a href="http://cloudfoundry.csdn.net/download.html">http://cloudfoundry.csdn.net/download.html</a>下载课程的PPT和视频。另外，在10月25日下午PaaS引擎专场和晚上社区沙龙中，我们也将具体介绍应用开发的细节。</p>

<h3><strong>第四步：使用vmc或Eclipse/STS Cloud Foundry插件上传应用</strong></h3>

<p>使用vmc push即可上传应用程序，帮助文档请参考<a href="http://docs.cloudfoundry.com/tools/vmc/vmc-quick-ref.html">http://docs.cloudfoundry.com/tools/vmc/vmc-quick-ref.html</a></p>

<p> <img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/4.png" width="600px" alt=""></p>

<p>完成后，请在<a href="http://www.cloudfoundry.com">Cloud Foundry</a>会议手册里填写下面表格并撕下交给<a href="http://www.cloudfoundry.com">Cloud Foundry</a>展台工作人员，确认验证后，即可为您赠送Cloud Foundry主题卫衣一件。</p>

<p>= = = = = = = = = = = == = = = = == = = = = == = = = = == = = = = == = = = = == = = = = == = = = = == = =</p>

<table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="border:none;">
        <tbody>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
                    Cloud Foundry注册账号(Email地址)
                    <p></p>
                </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
                    应用
                </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
                    姓名              </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
                    电话
                </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
职务
                                    </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
            <tr>
                <td width="190" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        工作单位
                    </p>
                </td>
                <td width="236" valign="top" style="border:solid windowtext 1.0pt;">
                    <p class="MsoNormal">
                        <span>&nbsp;</span>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>


<p>附录：Hello World小实验
作者：janderlu，来源：<a href="http://blog.csdn.net/janderlu/article/details/7916018">http://blog.csdn.net/janderlu/article/details/7916018</a></p>

<p><strong>重要提醒：以下内容是一个非常简单的Hello World应用部署的步骤，Cloud Foundry启动营的合格应用应该使用MySQL等后台服务，上传纯Hello World将无法赢得奖品。</strong></p>

<p>在部署应用之前，首先必须了解一下VMC，这其实就是一个Unix下的命令行工具来操控Cloud Foundry，主要用来配置和部署应用等工作，VMC在各种平台下都有不同的版本（Windows，Mac，Linux），我的环境机器是Mac OS X Lion,  Cloud Foundry部署在Ubuntu 虚拟机里面，在Mac下安装VMC 很简单，直接一条命令就完事了。</p>

<blockquote><p>sudo gem install vmc</p></blockquote>

<p>这里说明一下，因为按照VMC必须要依赖Ruby和Ruby Gems, 而OS X直接内置了Ruby 1.8.7版本，所以就直接安装就可以，如果是Ubuntu 或者Windows的话，就必须先按照Ruby环境。</p>

<p>详细安装不同平台VMC文档可以参考这里:<br>
<a href="http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html">http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html</a></p>

<p>安装好vmc工具，就可以对Cloud Foundry进行操作了。在终端下输入命令
    <br/>
vmc target api.cloudfoundry.com</p>

<p>连接成功后，你可以通过vmc info查看CF 平台的信息.</p>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/5.png" width="600px" alt=""></p>

<p>接下来部署一个Hello World的测试应用上去</p>

<p>首先在你的机器上建立一个目录，比如~/Hello</p>

<p>然后添加一个hello.rb文件，里面代码如下：</p>

<pre>
1.  require 'sinatra'
2.  get '/' do
3.    "Hello from Cloud Foundry"
4.  end
</pre>


<p>保存退出</p>

<p>（注：这是使用Sinatra框架的Ruby Web应用）</p>

<p>然后在当前目录下使用vmc  push命令,这个过程会问你使用多少内存，是否需要服务等等</p>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/6.png" width="600px" alt=""></p>

<p>部署成功以后，在浏览器里面输入URL就可以访问刚才部署的应用了。</p>

<p>通过vmc apps命令就可以看到所有应用的运行状态</p>

<p><img src="http://l.ruby-china.org/rubyconf2012/img/cloudfoundry/7.png" width="600px" alt=""></p>

  </div>
  </span>
</div>
</body>
</html>
